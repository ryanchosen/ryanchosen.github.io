import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,b as a,a as r,f as t,e as o,w as p,r as l,o as h}from"./app-B-pwwXXS.js";const d="/assets/5.image-15-BDnH4tWS.png",c="/assets/5.image-14-DrVfa2Jf.png",g={};function m(u,e){const i=l("RouteLink");return h(),s("div",null,[e[3]||(e[3]=a('<h1 id="切换-dns" tabindex="-1"><a class="header-anchor" href="#切换-dns"><span>切换 DNS</span></a></h1><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>按前面的步骤，所有服务迁移完毕之后，最后就剩下 DNS 解析修改了。</p><h2 id="修改解析" tabindex="-1"><a class="header-anchor" href="#修改解析"><span>修改解析</span></a></h2><figure><img src="'+d+'" alt="alt text" tabindex="0" loading="lazy"><figcaption>alt text</figcaption></figure><p>在域名解析处，修改域名的解析地址即可。</p><p>如果 IP 已经过户到了新账号，则不需要修改解析。</p><h2 id="何确保业务稳定" tabindex="-1"><a class="header-anchor" href="#何确保业务稳定"><span>何确保业务稳定</span></a></h2><p>域名解析更换时，由于 DSN 解析存在缓存，各运营商的解析缓存刷新时间会有所不同，短则一两分钟，长则一两天。所以，为了确保业务稳定，可以采用以下两种方案。</p><h3 id="双可用模式" tabindex="-1"><a class="header-anchor" href="#双可用模式"><span>双可用模式</span></a></h3>',10)),r("p",null,[e[1]||(e[1]=t("原账号中的服务器仍然保持运行，数据库参考 ")),o(i,{to:"/Clouds/serviceMigration/03-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB.html"},{default:p(()=>e[0]||(e[0]=[t("03.数据库迁移")])),_:1,__:[0]}),e[2]||(e[2]=t(" 中的方案，使用双向同步。"))]),e[4]||(e[4]=a('<p>这样，如果存在部分流量指向旧的服务器，则仍然可用，直到所有流量都指向新的服务器再行关闭。</p><ol><li>使用 <a href="https://boce.aliyun.com/detect/http" target="_blank" rel="noopener noreferrer">网络拨测工具</a> 检查 DNS 解析生效情况。</li></ol><figure><img src="'+c+`" alt="alt text" tabindex="0" loading="lazy"><figcaption>alt text</figcaption></figure><ol start="2"><li>通过查询原账号服务器中的 Nginx 等访问日志，检查是否仍有流量存在。</li></ol><h3 id="代理模式" tabindex="-1"><a class="header-anchor" href="#代理模式"><span>代理模式</span></a></h3><p>在原服务器的网关入口处，通过搭建 Nginx 代理，将流程转发至新的服务器。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  location</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    proxy_pass</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://10.8.8.8/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ul><li><a href="https://boce.aliyun.com/detect/http" target="_blank" rel="noopener noreferrer">网络拨测工具</a></li></ul>`,9))])}const b=n(g,[["render",m]]),y=JSON.parse('{"path":"/Clouds/serviceMigration/5.html","title":"切换 DNS","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2022-01-07T00:00:00.000Z","category":["阿里云迁移"],"description":"切换 DNS 概述 按前面的步骤，所有服务迁移完毕之后，最后就剩下 DNS 解析修改了。 修改解析 alt textalt text 在域名解析处，修改域名的解析地址即可。 如果 IP 已经过户到了新账号，则不需要修改解析。 何确保业务稳定 域名解析更换时，由于 DSN 解析存在缓存，各运营商的解析缓存刷新时间会有所不同，短则一两分钟，长则一两天。所以...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"切换 DNS\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-01-07T00:00:00.000Z\\",\\"dateModified\\":\\"2025-10-30T07:29:16.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Ryan Su\\"}]}"],["meta",{"property":"og:url","content":"https://mister-hope.github.io/Clouds/serviceMigration/5.html"}],["meta",{"property":"og:site_name","content":"Blog"}],["meta",{"property":"og:title","content":"切换 DNS"}],["meta",{"property":"og:description","content":"切换 DNS 概述 按前面的步骤，所有服务迁移完毕之后，最后就剩下 DNS 解析修改了。 修改解析 alt textalt text 在域名解析处，修改域名的解析地址即可。 如果 IP 已经过户到了新账号，则不需要修改解析。 何确保业务稳定 域名解析更换时，由于 DSN 解析存在缓存，各运营商的解析缓存刷新时间会有所不同，短则一两分钟，长则一两天。所以..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-10-30T07:29:16.000Z"}],["meta",{"property":"article:published_time","content":"2022-01-07T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-10-30T07:29:16.000Z"}]]},"git":{"createdTime":1761039133000,"updatedTime":1761809356000,"contributors":[{"name":"ryanchosen","username":"ryanchosen","email":"syhchosen@google.com","commits":2,"url":"https://github.com/ryanchosen"}]},"readingTime":{"minutes":1.18,"words":354},"filePathRelative":"Clouds/serviceMigration/5.md","excerpt":"\\n<h2>概述</h2>\\n<p>按前面的步骤，所有服务迁移完毕之后，最后就剩下 DNS 解析修改了。</p>\\n<h2>修改解析</h2>\\n<figure><figcaption>alt text</figcaption></figure>\\n<p>在域名解析处，修改域名的解析地址即可。</p>\\n<p>如果 IP 已经过户到了新账号，则不需要修改解析。</p>\\n<h2>何确保业务稳定</h2>\\n<p>域名解析更换时，由于 DSN 解析存在缓存，各运营商的解析缓存刷新时间会有所不同，短则一两分钟，长则一两天。所以，为了确保业务稳定，可以采用以下两种方案。</p>\\n<h3>双可用模式</h3>\\n<p>原账号中的服务器仍然保持运行，数据库参考 <a href=\\"/Clouds/serviceMigration/03-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB.html\\" target=\\"_blank\\">03.数据库迁移</a> 中的方案，使用双向同步。</p>","autoDesc":true}');export{b as comp,y as data};
