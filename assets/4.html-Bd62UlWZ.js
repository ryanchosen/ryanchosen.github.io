import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,b as n,o as i}from"./app-B-pwwXXS.js";const o="/assets/4.image-7-YJo_L4ia.png",r="/assets/4.image-9-BAGYfdT8.png",s="/assets/4.image-10-DLbPHwdQ.png",p="/assets/4.image-11-CijgQTWo.png",l="/assets/4.image-8-CXyZFPvP.png",c="/assets/4.image-12-CNSNQKuC.png",h="/assets/4.image-13-BF6JuMX8.png",d={};function g(u,e){return i(),a("div",null,e[0]||(e[0]=[n('<h1 id="oss-迁移" tabindex="-1"><a class="header-anchor" href="#oss-迁移"><span>OSS 迁移</span></a></h1><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>Bucket 复制分为两种，同区域复制和跨区域复制</p><p>同账号复制比较简单，根据提示填写信息即可，本文主要介绍跨账号复制。</p><h2 id="同区域复制" tabindex="-1"><a class="header-anchor" href="#同区域复制"><span>同区域复制</span></a></h2><figure><img src="'+o+'" alt="alt text" tabindex="0" loading="lazy"><figcaption>alt text</figcaption></figure><p>授权角色选择 “AliyunOSSRole”, 创建方法见 “跨区域复制”。然后点击确定即可。</p><h2 id="跨区域复制" tabindex="-1"><a class="header-anchor" href="#跨区域复制"><span>跨区域复制</span></a></h2><p>假设我们将原账号的 old-raw-files （华为2 北京）， 迁移至新账号的 tests-copy（华东2 上海）</p><h3 id="在原账号配置授权角色-aliyunossrole" tabindex="-1"><a class="header-anchor" href="#在原账号配置授权角色-aliyunossrole"><span>在原账号配置授权角色 “AliyunOSSRole”</span></a></h3><p>跨账号复制时，需要首先在原账号添加授权角色，打开 <a href="https://ram.console.aliyun.com/roles/detail?roleName=AliyunOSSRole" target="_blank" rel="noopener noreferrer">RAM 访问控制/角色</a>, 添加一个名为 AliyunOSSRole 的角色，增加授权 AliyunOSSFullAccess</p><figure><img src="'+r+'" alt="alt text" tabindex="0" loading="lazy"><figcaption>alt text</figcaption></figure><p>添加成功后，在角色详情中，找到 ARM，点击复制，复制的内容将在后面新账号处用到。</p><h3 id="在接收侧面配置授权" tabindex="-1"><a class="header-anchor" href="#在接收侧面配置授权"><span>在接收侧面配置授权</span></a></h3><p>打开新账号中的目标 Bucket，进入管理界面，在左侧菜单栏中，依次找到 “文件管理/权限控制/Bucket授权策略”，点击“接收复制对象”，</p><figure><img src="'+s+'" alt="alt text" tabindex="0" loading="lazy"><figcaption>alt text</figcaption></figure><p>在右侧弹窗中，使用默认配置 “从源端复制RAM角色ARN获取”，下方的 “源端复制RAM角色ARN”，粘贴前面复制好的 ARM，之后点击生成 Policy, 点击保存。</p><p>成功后显示如下：</p><figure><img src="'+p+'" alt="alt text" tabindex="0" loading="lazy"><figcaption>alt text</figcaption></figure><h3 id="开启复制" tabindex="-1"><a class="header-anchor" href="#开启复制"><span>开启复制</span></a></h3><figure><img src="'+l+'" alt="alt text" tabindex="0" loading="lazy"><figcaption>alt text</figcaption></figure><p>建议使用默认配置，即勾选 “全部文件进行同步”以及“增/改 同步”，“复制历史数据”。这意思是说，首次同步时会进行一次全量复制，之后会将增加/修改的文件，增量同步新的 Bucket。</p><figure><img src="'+c+'" alt="alt text" tabindex="0" loading="lazy"><figcaption>alt text</figcaption></figure><p>点击“确定”，之后点击 “确认开启”，等待数据复制开启。</p><p>稍等片刻，可以看到状态为运行中。</p><figure><img src="'+h+'" alt="alt text" tabindex="0" loading="lazy"><figcaption>alt text</figcaption></figure><p>等到 OSS 迁移完成之后，可以再关闭复制。</p><h2 id="切换域名" tabindex="-1"><a class="header-anchor" href="#切换域名"><span>切换域名</span></a></h2><ol><li><p>如果你的 Bucket 绑定了自定义域名，则在新的 Bucket 中，重新添加绑定的域名即可，绑定成功后，旧的 Bucket 处，自定义域名会自动失效。</p></li><li><p>如果没有使用自定义域名，则需要批量更新数据库中存储的 oss 域名，或者考虑保留原来的 Bucket 名称，如 3 所述。</p></li><li><p>Bucket 的名称默认全国唯一，如果希望保留原来的名称，可以使用以下方式间接实现：</p></li></ol><p>这里需要创建三个 Bucket，A(name-1) 数据迁移到 B(name-2)，删除 A，新建与 A 同名的 C(name-1), 再将 B 数据迁移到 C</p><h2 id="其他" tabindex="-1"><a class="header-anchor" href="#其他"><span>其他</span></a></h2><h3 id="cdn-切换" tabindex="-1"><a class="header-anchor" href="#cdn-切换"><span>CDN 切换</span></a></h3><p>完成 Bucket 迁移后，在新账号重新绑定域名和配置 CDN，参考 <a href="https://help.aliyun.com/zh/cdn/getting-started/quick-access-to-alibaba-cloud-cdn" target="_blank" rel="noopener noreferrer">快速接入阿里云CDN</a>, 首先在 Bucket 中的 “数据处理/Bucket配置/域名管理”处添加绑定域名，然后在 CDN 控制台添加域名。</p><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><p><a href="https://help.aliyun.com/zh/oss/user-guide/copy-with-same-account-and-same-region" target="_blank" rel="noopener noreferrer">同账号同区域复制</a><br><a href="https://help.aliyun.com/zh/oss/user-guide/copy-across-accounts-in-the-same-region" target="_blank" rel="noopener noreferrer">跨账号同区域复制</a></p>',35)]))}const y=t(d,[["render",g]]),x=JSON.parse('{"path":"/Clouds/serviceMigration/4.html","title":"OSS 迁移","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2022-01-07T00:00:00.000Z","category":["阿里云迁移"],"description":"OSS 迁移 概述 Bucket 复制分为两种，同区域复制和跨区域复制 同账号复制比较简单，根据提示填写信息即可，本文主要介绍跨账号复制。 同区域复制 alt textalt text 授权角色选择 “AliyunOSSRole”, 创建方法见 “跨区域复制”。然后点击确定即可。 跨区域复制 假设我们将原账号的 old-raw-files （华为2 北...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"OSS 迁移\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-01-07T00:00:00.000Z\\",\\"dateModified\\":\\"2025-10-30T07:29:16.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Ryan Su\\"}]}"],["meta",{"property":"og:url","content":"https://mister-hope.github.io/Clouds/serviceMigration/4.html"}],["meta",{"property":"og:site_name","content":"Blog"}],["meta",{"property":"og:title","content":"OSS 迁移"}],["meta",{"property":"og:description","content":"OSS 迁移 概述 Bucket 复制分为两种，同区域复制和跨区域复制 同账号复制比较简单，根据提示填写信息即可，本文主要介绍跨账号复制。 同区域复制 alt textalt text 授权角色选择 “AliyunOSSRole”, 创建方法见 “跨区域复制”。然后点击确定即可。 跨区域复制 假设我们将原账号的 old-raw-files （华为2 北..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-10-30T07:29:16.000Z"}],["meta",{"property":"article:published_time","content":"2022-01-07T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-10-30T07:29:16.000Z"}]]},"git":{"createdTime":1761039133000,"updatedTime":1761809356000,"contributors":[{"name":"ryanchosen","username":"ryanchosen","email":"syhchosen@google.com","commits":2,"url":"https://github.com/ryanchosen"}]},"readingTime":{"minutes":2.63,"words":789},"filePathRelative":"Clouds/serviceMigration/4.md","excerpt":"\\n<h2>概述</h2>\\n<p>Bucket 复制分为两种，同区域复制和跨区域复制</p>\\n<p>同账号复制比较简单，根据提示填写信息即可，本文主要介绍跨账号复制。</p>\\n<h2>同区域复制</h2>\\n<figure><figcaption>alt text</figcaption></figure>\\n<p>授权角色选择 “AliyunOSSRole”, 创建方法见 “跨区域复制”。然后点击确定即可。</p>\\n<h2>跨区域复制</h2>\\n<p>假设我们将原账号的 old-raw-files （华为2 北京）， 迁移至新账号的 tests-copy（华东2 上海）</p>\\n<h3>在原账号配置授权角色 “AliyunOSSRole”</h3>","autoDesc":true}');export{y as comp,x as data};
